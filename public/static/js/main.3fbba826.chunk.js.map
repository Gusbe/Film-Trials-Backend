{"version":3,"sources":["lib/auth-service.js","providers/AuthProvider.js","components/PrivateRoute.js","components/AnonRoute.js","components/Logo.js","components/Navbar.js","components/Footer.js","pages/Signup.js","pages/Login.js","lib/locationService.js","pages/AddLocation.js","pages/ViewLocation.js","components/OneResult.js","components/ResultList.js","pages/Search.js","pages/SearchMap.js","App.js","index.js"],"names":["authService","AuthService","Object","classCallCheck","this","auth","axios","create","baseURL","process","withCredentials","user","username","password","post","then","_ref","data","_ref2","response","get","AuthContext","React","createContext","Provider","Consumer","withAuth","Comp","_Component","WithAuth","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","_this","react_default","a","createElement","authStore","assign","isLogged","logout","login","signup","props","Component","AuthProvider","state","status","setUser","_this2","setState","logoutUser","catch","error","console","log","loginUser","body","signupUser","_this3","me","_this$state","children","component","rest","objectWithoutProperties","Route","render","Redirect","to","pathname","from","location","Logo","className","src","alt","_this$props","components_Logo","onClick","Link","Navbar","handleFormSubmit","event","preventDefault","handleChange","_event$target","target","name","defineProperty","removePlaceholder","e","placeholder","addPlaceholderUsername","addPlaceholderPassword","onSubmit","type","onFocus","onBlur","onChange","id","notFilledFields","_this$state2","locationService","LocationService","delete","_ref3","file","_ref4","searchParams","lon","lat","dist","_ref5","AddLocation","call","changeView","viewport","locateUser","navigator","geolocation","getCurrentPosition","position","currentPosition","latitude","coords","longitude","newViewport","zoom","bearing","pitch","width","height","handleClick","ev","savePosition","lngLat","fileOnchange","files","uploadData","FormData","append","imageUpload","scenePictureUrl","locationObject","title","placeName","coordinates","add","history","push","_id","controlButton","disable","esm","mapboxApiAccessToken","mapStyle","onViewportChange","offsetLeft","offsetTop","style","disabled","ViewLocation","showDelete","deleteLink","deleteElement","match","params","redirectSearch","author","owner","view","ownerState","Fragment","href","fill","OneResult","showMarker","changeDetailMarker","unshowMarker","distance","info","concat","Math","trunc","toFixed","onMouseOver","onMouseOut","backgroundImage","ResultList","resultList","results","map","result","components_OneResult","Search","launchSearch","latSearch","lonSearch","d","z","search","window","scrollTo","pos","detailPosition","lastSearch","Date","now","Location","length","components_ResultList","SearchMap","closeLocation","stopPropagation","selectedLocation","goToViewLocation","addEventListener","require","config","App","AuthProvider_AuthProvider","components_Navbar","Switch","path","exact","components_AnonRoute","Signup","Login","components_PrivateRoute","Footer","ReactDOM","BrowserRouter","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.3fbba826.chunk.js","sourcesContent":["import axios from 'axios';\n\nclass AuthService {\n  constructor() {\n    this.auth = axios.create({\n      baseURL: process.env.REACT_APP_BACKEND_URL,\n      withCredentials: true // only beacause we want to share cookies with the backend server otherwise set it to false\n    })\n  }\n\n  signup(user) {\n    const { username, password } = user;\n    return this.auth.post('/auth/signup', {username, password})\n      .then(({ data }) => data);\n  }\n\n  login(user) {\n    const { username, password } = user;\n    return this.auth.post('/auth/login', {username, password})\n      .then(({ data }) => data);\n  }\n\n  logout() {\n    return this.auth.post('/auth/logout', {})\n      .then(response => response.data)\n  }\n\n  me(user) {\n    return this.auth.get('/auth/me')\n    .then(response => response.data)\n  }\n}\n\nconst authService = new AuthService();\n\nexport default authService;\n","import React, { Component } from 'react'\nimport authService from '../lib/auth-service';\n\nexport const AuthContext = React.createContext(\n  // authStore // default value\n);\n\nconst { Provider, Consumer }  = AuthContext;\n\nexport const withAuth = (Comp) => {\n  return class WithAuth extends Component {\n    render() {\n      return (\n        <Consumer>\n          {(authStore) => {\n            return <Comp \n              isLogged={authStore.isLogged}\n              user={authStore.user}\n              logout={authStore.logout}\n              login={authStore.login}\n              signup={authStore.signup}\n              {...this.props} />\n          }}\n        </Consumer>\n      )\n    }    \n  }\n}\n\nexport default class AuthProvider extends Component {\n  state = {\n    isLogged: false,\n    user: {},\n    status: 'loading'\n  }\n\n  setUser = (user) => {\n    this.setState({\n      isLogged: true,\n      user,\n    })\n  }\n\n  logoutUser = () => {\n    return authService.logout()\n      .then(() => {\n        this.setState({ \n          isLogged: false,\n          user: {},\n        });\n      })\n      .catch( error => console.log(error))\n  }\n\n  loginUser = (body) => {\n    return authService.login(body)\n      .then((user) => {\n        this.setUser(user);\n      })\n      .catch(error => error)\n  }\n\n  signupUser = (body) => {\n    return authService.signup(body)\n      .then((user) => {\n        this.setUser(user);\n      })\n      .catch(error => console.log(error))\n  }\n\n  componentDidMount() {\n    authService.me()\n      .then((user) => {\n        this.setState({\n          isLogged: true,\n          user,\n          status: 'loaded'\n        })\n      })\n      .catch((error) => {\n        this.setState({ \n          isLogged: false,\n          user: {},\n          status: 'loaded'\n        });\n      })\n  }\n\n  render() {\n    const { isLogged, user, status } = this.state;\n    const { children } = this.props;\n    switch (status) {\n      case 'loading':\n        return <div>Loading</div>\n      default:\n        return (\n          <Provider value={\n            { isLogged,\n              user,\n              logout: this.logoutUser, \n              login: this.loginUser,\n              signup: this.signupUser,\n            }}>\n            {children}\n          </Provider>    \n        );\n    }\n  }\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { withAuth } from '../providers/AuthProvider';\n\nconst PrivateRoute = ({ component: Component, isLogged, ...rest }) => {\n  // console.log({ component: Component, user, ...rest }) \n  return (\n    <Route \n      {...rest}\n      render={props => {\n        if (isLogged) {\n          return <Component {...props} />\n        } else {\n          return <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n        }\n      }}\n    />\n  )\n}\n\n\n\nexport default withAuth(PrivateRoute);","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { withAuth } from '../providers/AuthProvider';\n\nconst AnonRoute = ({ component: Component, isLogged, ...rest }) => {\n  return (\n    <Route\n      {...rest}\n      render={props => {\n        if (!isLogged) {\n          return <Component {...props} />\n        } else {\n          return <Redirect to={{ pathname: '/location/add', state: { from: props.location } }} />\n        }\n      }\n      }\n    />\n  )\n}\nexport default withAuth(AnonRoute);","import React from 'react'\n\nfunction Logo() {\n  return (\n    <div className=\"logo\">\n      <img src=\"/img/logo.svg\" alt=\"FilmTrails\" />\n      <h1>FILM TRAILS</h1>\n    </div>\n  )\n}\n\nexport default Logo;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withAuth } from '../providers/AuthProvider';\n\nimport Logo from './Logo';\n\nclass Navbar extends Component {\n  render() {\n    const { isLogged, user, logout } = this.props;\n    const { username } = user;\n    if (isLogged) {\n      return (\n        <div className=\"navbar\">\n          <Logo />\n          <div className=\"logout\">\n            <p>\n              <span>{username}</span>\n              <img src='/img/logout.png' alt='logout' onClick={logout} />\n            </p>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"navbar\">\n          <Logo />\n          <div className=\"login\">\n            <Link className=\"link-nav\" to='/login'><img src=\"/img/user.png\" alt='login'/></Link>\n          </div>\n        </div>\n      )\n    }\n  }\n}\n\nexport default withAuth(Navbar);","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\n\nclass Navbar extends Component {\n  render() {\n    return (\n      <div className=\"footer\">\n        <div>\n          <Link className=\"link-nav\" to='/'><img src=\"/img/map-icon.svg\" alt='Map Search'/></Link>\n        </div>\n        <div>\n          <Link className=\"link-nav\" to='/search'><img src=\"/img/search-list.svg\" alt='Search List'/></Link>\n        </div>\n        <div>\n          <Link className=\"link-nav\" to='/location/add'><img src=\"/img/map-add.svg\" alt='Map Add'/></Link>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Navbar;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withAuth } from '../providers/AuthProvider';\n\nclass Signup extends Component {\n\n  state = {\n    username: \"\",\n    password: \"\",\n  };\n\n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.props.signup({ username, password })\n      .then(() => {\n        this.setState({\n            username: \"\",\n            password: \"\",\n        });\n      })\n      .catch(error => console.log(error) )\n  }\n\n  handleChange = (event) => {  \n    const {name, value} = event.target;\n    this.setState({[name]: value});\n  }\n\n  removePlaceholder = (e) => e.target.placeholder = \"\";\n  addPlaceholderUsername = (e) => e.target.placeholder = \"Username\";\n  addPlaceholderPassword = (e) => e.target.placeholder = \"Password\";\n\n  render() {\n    const { username, password } = this.state;\n    return (\n        <div className='signup-page'>\n          <div className=\"background\"></div>\n          <div className='form-box'>\n            <form onSubmit={this.handleFormSubmit}>\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder=\"Username\"\n                onFocus={this.removePlaceholder} \n                onBlur={this.addPlaceholderUsername}\n                value={username}\n                onChange={this.handleChange}\n              />\n              <input\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                onFocus={this.removePlaceholder} \n                onBlur={this.addPlaceholderPassword}\n                value={password}\n                onChange={this.handleChange}\n              />\n              <input id='form-button' type=\"submit\" value=\"Signup\" />\n              <Link className='signup-link' to='/login'>Already have an account? Login.</Link>\n            </form>\n          </div>\n        </div>\n    )\n  }\n}\n\nexport default withAuth(Signup);","import React, { Component } from 'react';\nimport { withAuth } from '../providers/AuthProvider';\nimport { Link } from 'react-router-dom';\n\nclass Login extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    notFilledFields: false,\n  }\n\n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const { username, password } = this.state\n\n    this.props.login({ username, password })\n      .then((data) => {\n        // if(data.response.data.status === 422) {\n        //   this.setState({\n        //     notFilledFields: true\n        //   })\n        // }\n      });\n  }\n\n  handleChange = (event) => {  \n    const {name, value} = event.target;\n    this.setState({[name]: value});\n  }\n\n  removePlaceholder = (e) => e.target.placeholder = \"\";\n  addPlaceholderUsername = (e) => e.target.placeholder = \"Username\";\n  addPlaceholderPassword = (e) => e.target.placeholder = \"Password\";\n\n  render() {\n    const { username, password, notFilledFields } = this.state;\n    return (\n        <div className='login-page'>\n          <div className=\"background\"></div>\n          <div className='form-box'>\n            <form onSubmit={this.handleFormSubmit}>\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder=\"Username\"\n                onFocus={this.removePlaceholder} \n                onBlur={this.addPlaceholderUsername}\n                value={username}\n                onChange={this.handleChange}\n              />\n              <input\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                onFocus={this.removePlaceholder} \n                onBlur={this.addPlaceholderPassword}\n                value={password}\n                onChange={this.handleChange}\n              />\n              <input id='form-button' type=\"submit\" value=\"Login\" />\n              {notFilledFields ? <p>Missing some fields</p>: null}\n              <Link className='signup-link' to='/signup'>Create your account to add film locations</Link>\n            </form>\n          </div>\n        </div>\n    )\n  }\n}\n\nexport default withAuth(Login);","import axios from 'axios';\n\nclass LocationService {\n\n  constructor() {\n\n    this.location = axios.create({\n      baseURL: process.env.REACT_APP_BACKEND_URL,\n      withCredentials: true\n    })\n\n  }\n\n  view(id) {\n    return this.location.get('/location/' + id)\n      .then(({ data }) => data)\n  }\n\n  add(location) {\n    return this.location.post('/location/add', location)\n      .then(({ data }) => data)\n  }\n\n  delete(id) {\n    return this.location.delete('/location/delete/' + id)\n      .then(({ data }) => data)\n  }\n\n  imageUpload(file) {\n    return this.location.post('/location/add/picture', file)\n      .then(({ data }) => data)\n  }\n\n  search(searchParams) {\n    console.log(`launching search------>`);\n    console.log(searchParams);\n    return this.location.get('/search/?lon=' + searchParams.lon + '&lat=' + searchParams.lat + '&dist=' + searchParams.dist)\n    .then(({ data }) => data)\n  }\n}\n\nconst locationService = new LocationService();\n\nexport default locationService;","import React, { Component } from 'react'\nimport { withAuth } from '../providers/AuthProvider';\nimport ReactMapGL, { Marker } from 'react-map-gl';\n\nimport locationService from '../lib/locationService';\n\nclass AddLocation extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      lat: '',\n      lon: '',\n      placeName: '',\n      scenePictureUrl: '',\n      disable: true,\n      viewport: {\n        latitude: 41.5,\n        longitude: 2.3,\n        zoom: 10,\n        bearing: 0,\n        pitch: 0,\n        width: '100vp',\n        height: 200,\n      },\n      currentPosition: {\n        latitude: null,\n        longitude: null\n      },\n      savePosition: null\n    }\n  }\n\n  changeView = (viewport) => {\n    this.setState({ viewport });\n  }\n\n  locateUser = () => {\n    navigator.geolocation.getCurrentPosition(position => {\n\n      const currentPosition = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude\n      }\n      const newViewport = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        zoom: this.state.viewport.zoom,\n        bearing: this.state.viewport.bearing,\n        pitch: this.state.viewport.pitch,\n        width: this.state.viewport.width,\n        height: this.state.viewport.height\n      }\n      this.setState({ currentPosition, viewport: newViewport });\n    });\n  }\n\n  handleClick = (ev) => {\n    \n    const savePosition = {\n      lon: ev.lngLat[0],\n      lat: ev.lngLat[1]\n    }\n    this.setState({savePosition, lat:savePosition.lat, lon:savePosition.lon});\n  };\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value});\n  }\n\n  fileOnchange = (event) => {\n    const file = event.target.files[0];\n    const uploadData = new FormData()\n    uploadData.append('photo', file)\n\n    locationService.imageUpload(uploadData)\n      .then((scenePictureUrl) => {\n        this.setState({scenePictureUrl})\n      })\n      .catch((error) => console.log(error))\n  }\n\n  handleFormSubmit = (event) => {\n    event.preventDefault();\n\n    const locationObject = {\n      title: this.state.title,\n      placeName: this.state.placeName,\n      scenePictureUrl: this.state.scenePictureUrl,\n      coords: {\n        coordinates: [this.state.lon, this.state.lat],\n        type: 'Point'\n      }\n    };\n\n    locationService.add(locationObject)\n      .then((data) => {\n        this.props.history.push('/location/' + data._id);\n      });\n  }\n\n  controlButton = () => {\n    if (\n      this.state.title\n      && this.state.scenePictureUrl\n      && this.state.lat\n      && this.state.lon\n    ){\n      return false\n    }\n    else{\n      return true;\n    }\n  }\n\n  componentDidUpdate() {\n    if(!this.controlButton() && this.state.disable){\n      this.setState({disable: false});\n    }\n    else if(this.controlButton() && !this.state.disable){\n      this.setState({disable: true});\n    }\n  }\n\n  render() {\n    const { viewport } = this.state;\n    \n    return (\n      <div className='add-location-page'>\n        <h2>Add a new movie location</h2>\n        <div className='add-location'>\n          <h3>Select location:</h3>\n          <button className='get-location-button' onClick={this.locateUser}>Current location</button>\n        </div>\n        <div className=\"add-map\">\n          <ReactMapGL\n            {...viewport}\n            mapboxApiAccessToken={process.env.REACT_APP_MAP_TOKEN}\n            mapStyle='mapbox://styles/gusbe/cjw3cw74r0vw01cpiazy0w3f4'\n            onViewportChange={this.changeView}\n            onClick={this.handleClick}\n          >\n\n            {this.state.currentPosition.latitude ? (\n              <Marker\n                key='currentLocation'\n                latitude={this.state.currentPosition.latitude}\n                longitude={this.state.currentPosition.longitude}\n                offsetLeft={-10}\n                offsetTop={-10}\n              >\n                <div>\n                  <img src='/img/blue.svg' alt='savePosition' style={{ width: '20px' }} />\n                </div>\n              </Marker>\n            ) : null}\n\n            {this.state.savePosition ? (\n              <Marker\n                key='saveLocation'\n                latitude={this.state.savePosition.lat}\n                longitude={this.state.savePosition.lon}\n                offsetLeft={-8}\n                offsetTop={-27}\n              >\n                <div>\n                  <img src='/img/logo-red.svg' alt='savePosition' style={{ width: '16px' }} />\n                </div>\n              </Marker>\n            ) : null}\n\n\n          </ReactMapGL>\n        </div>\n        <div className=\"add-form\">\n          <form onSubmit={this.handleFormSubmit}>\n            <label className='lat-lon-inputs' name=\"lon\">Lon:</label>\n            <input className='lat-lon-inputs' type=\"text\" name=\"lon\" value={this.state.lon} onChange={this.handleChange} />\n            <label className='lat-lon-inputs' name=\"lat\">Lat:</label>\n            <input className='lat-lon-inputs' type=\"text\" name=\"lat\" value={this.state.lat} onChange={this.handleChange} />\n            <h3>Place name:</h3>\n            <input type=\"text\" name=\"placeName\" value={this.state.placeName} onChange={this.handleChange} />\n            <h3>Movie title:</h3>\n            <input type=\"text\" name=\"title\" value={this.state.title} onChange={this.handleChange} />\n            <h3>Upload a scene picture:</h3>\n            <input type=\"file\" onChange={this.fileOnchange} name=\"image\" />\n            {this.state.disable ? <input id='add-button-disabled' type=\"submit\" value='Complete all the fields' disabled></input> : <input id='add-button' type=\"submit\"  value='Send new location'></input>}\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(AddLocation);","import React, { Component } from 'react'\nimport { Link, Redirect } from 'react-router-dom';\nimport locationService from '../lib/locationService';\nimport {withAuth} from '../providers/AuthProvider';\nimport ReactMapGL, { Marker } from 'react-map-gl';\n\nclass ViewLocation extends Component {\n\n  constructor(props){\n    \n    super(props);\n\n    this.state = {\n      id: '',\n      title: '',\n      lat: '',\n      lon: '',\n      placeName: '',\n      scenePictureUrl: '',\n      author: '',\n      owner: false,\n      viewport: {\n        latitude: null,\n        longitude: null,\n        zoom: null,\n        bearing: null,\n        pitch: null,\n        width: null,\n        height: null\n      },\n      currentPosition: {\n        latitude: null,\n        longitude: null\n      },\n      deleteLink: false,\n      redirectSearch: false\n    }\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n    locationService.view(id)\n    .then((location) => {\n      \n      const { _id, scenePictureUrl, title, coords, user, placeName } = location;\n\n      let ownerState = false;\n      if(this.props.user._id === user._id){\n        ownerState = true;  \n      }\n\n      let viewport = {\n        latitude: coords.coordinates[1],\n        longitude: coords.coordinates[0],\n        zoom: 12,\n        bearing: 0,\n        pitch: 0,\n        width: '100vp',\n        height: 150\n      }\n\n      this.setState({\n        id: _id,\n        title,\n        lat: coords.coordinates[1],\n        lon: coords.coordinates[0],\n        placeName,\n        scenePictureUrl,\n        author: user.username,\n        owner: ownerState,\n        viewport\n      })\n    });\n  }\n\n  showDelete = () => {\n    if(this.state.deleteLink){\n      this.setState({deleteLink: false})\n    }\n    else{\n      this.setState({deleteLink: true})\n    }\n  }\n\n  deleteElement = () => {\n    const { id } = this.props.match.params;\n    locationService.delete(id)\n      .then((location) => {\n        this.setState({redirectSearch: true});\n      });\n  }\n\n\n  render() {\n    const { viewport, lat, lon } = this.state;\n    return (\n      <div className='view-page'>\n        {this.state.redirectSearch ? (\n          <Redirect to='/'></Redirect>\n        ) : (\n        <>\n        \n\n\n        <div className=\"view-image\">\n          <img src={this.state.scenePictureUrl} alt={this.state.title} />\n          <p>Uploaded by: {this.state.author} </p>\n        </div>\n\n\n\n\n        <div className=\"view-title\">\n          <h1>{this.state.title}</h1>\n          <h2>{this.state.placeName}</h2>\n        </div>\n       \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        {this.state.owner ? (\n          <div className=\"view-links\">\n            {this.state.deleteLink ? (\n              <p className='view-links-component'>\n                Do you really want to delete this location?\n                <a href=\"#;\" className='view-links-component-link' onClick={this.deleteElement}>\n                  Yes\n                </a>\n                <a href=\"#;\" className='view-links-component-link' onClick={this.showDelete}>\n                  No\n                </a>\n              </p>\n            ) : (\n              <p className='view-links-component'>\n                <Link className='view-links-component-link' to={'/location/' + this.state.id + '/update'}>\n                <img src=\"/img/pen.svg\" alt=\"update\" className=\"update-icon\" />\n                Update\n                </Link>\n                <img src=\"/img/delete.svg\" alt=\"delete\" className=\"delete-icon\" />\n                <a href=\"#;\" className='view-links-component-link' onClick={this.showDelete}>Delete</a>\n              </p>\n            )}\n          </div>\n        ) : null}\n\n\n\n\n\n\n\n\n\n        <div className=\"view-map\">\n          {lat ? (\n            <ReactMapGL\n              {...viewport}\n              mapboxApiAccessToken={process.env.REACT_APP_MAP_TOKEN}\n              mapStyle='mapbox://styles/gusbe/cjw3cw74r0vw01cpiazy0w3f4'\n              className='view-map-wrap'\n            >\n\n              <Marker\n                key='sss'\n                latitude={lat}\n                longitude={lon}\n                offsetLeft={-8}\n                offsetTop={-27}\n              >\n                <div>\n                  <img src='/img/logo-red.svg' alt='currentPosition' style={{ width: '20px', fill: 'red' }} />\n                </div>\n              </Marker>\n\n              {this.state.currentPosition.latitude ? (\n                <Marker\n                  key='currentLocation'\n                  latitude={this.state.currentPosition.latitude}\n                  longitude={this.state.currentPosition.longitude}\n                  offsetLeft={-10}\n                  offsetTop={-10}\n                >\n                  <div>\n                    <img src='/img/pin.png' alt='currentPosition' style={{ width: '20px' }} />\n                  </div>\n                </Marker>\n              ) : null}\n            </ReactMapGL>\n          ) : null}\n        </div>\n\n\n\n\n\n\n\n\n\n        </>\n        )}\n      </div>\n    );\n  }\n}\n\n\nexport default withAuth(ViewLocation);","import React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\n\nclass OneResult extends Component {\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      distance: props.info.distance,\n      scenePictureUrl: props.info.scenePictureUrl,\n      title: props.info.title,\n      _id: props.info._id,\n      lat: props.info.coords.coordinates[1],\n      lon: props.info.coords.coordinates[0],\n      placeName: props.info.placeName\n    }\n\n  }\n\n  showMarker = () => {\n\n    const position = {\n      lon: this.state.lon,\n      lat: this.state.lat,\n    }\n    this.props.changeDetailMarker(position);\n  }\n\n  unshowMarker = () => {\n    this.props.changeDetailMarker({ lat: null, lon: null });\n  }\n\n\n  render() {\n    let distance;\n    if (this.state.distance / 1000 < 1) distance = `${Math.trunc(this.state.distance)} meters`;\n    else if (this.state.distance / 1000 < 5) distance = `${(this.state.distance / 1000).toFixed(2)} Kms`;\n    else distance = `${Math.trunc(this.state.distance / 1000) - 1} Kms`;\n    return (\n      <Link to={`/location/${this.state._id}`} className='link-location'>\n        <div className=\"one-result\" onMouseOver={this.showMarker} onMouseOut={this.unshowMarker}>\n          <div className=\"location-info-one-result\" style={{ backgroundImage: 'url(' + this.state.scenePictureUrl + ')' }} />\n          <div className=\"title-distance\">\n            <p id=\"title-one-result\">{this.state.title}</p>\n            <div className=\"place-distance\">\n              <p id=\"place-one-result\">{this.state.placeName}</p>\n              <p id=\"distance-one-result\">{distance}</p>\n            </div>\n          </div>\n        </div>\n      </Link>\n    )\n  }\n}\n\nexport default OneResult;\n","import React, { Component } from 'react'\nimport OneResult from './OneResult';\n\nclass ResultList extends Component {\n\n  constructor(props){\n    super(props);\n  }\n  \n\n  render() {\n    const { results } = this.props;\n    const resultList = results.map( (result) => {\n      return (\n       <div key={result._id}>\n         <OneResult info={result} changeDetailMarker={this.props.changeDetailMarker}/>\n       </div>\n      );\n    });\n\n\n    return (\n      <div>\n        {resultList}\n      </div>\n    )\n  }\n}\n\nexport default ResultList;","import React, { Component } from 'react'\nimport ReactMapGL, { Marker } from 'react-map-gl';\n\nimport locationService from '../lib/locationService';\nimport ResultList from './../components/ResultList';\n\n\nclass Search extends Component {\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      results: [],\n      searchParams: {\n        lat: 41.39,\n        lon: 2.17,\n        dist: 25 / 2\n      },\n      viewport: {\n        latitude: 41.39,\n        longitude: 2.17,\n        zoom: 12,\n        bearing: 0,\n        pitch: 0,\n        width: '100vp',\n        height: 300,\n      },\n      currentPosition: {\n        latitude: null,\n        longitude: null\n      },\n      savePosition: {\n        lon: 2.17,\n        lat: 41.39\n      },\n      detailPosition: {\n        lon: null,\n        lat: null\n      },\n      lastSearch: null\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.state.lastSearch + 1000 < Date.now()) {\n      this.setState({ lastSearch: Date.now() });\n      this.launchSearch();\n    }\n  }\n\n\n  launchSearch = () => {\n    let latSearch;\n    let lonSearch;\n    if (this.state.savePosition !== null) {\n      latSearch = this.state.savePosition.lat;\n      lonSearch = this.state.savePosition.lon;\n    }\n    else {\n      latSearch = this.state.viewport.latitude;\n      lonSearch = this.state.viewport.longitude;\n    }\n\n    let d = 0;\n    let z = this.state.viewport.zoom;\n    if (z < 2) d = 13000000 / 2;\n    else if (z < 3) d = 10000000 / 2;\n    else if (z < 4) d = 4000000 / 2;\n    else if (z < 5) d = 2700000 / 2;\n    else if (z < 6) d = 1500000 / 2;\n    else if (z < 7) d = 700000 / 2;\n    else if (z < 8) d = 350000 / 2;\n    else if (z < 9) d = 182000 / 2;\n    else if (z < 10) d = 85000 / 2;\n    else if (z < 11) d = 43000 / 2;\n    else if (z < 12) d = 25000 / 2;\n    else if (z < 13) d = 13000 / 2;\n    else if (z < 14) d = 5000 / 2;\n    else if (z < 15) d = 2500 / 2;\n    else if (z < 16) d = 1300 / 2;\n\n    const searchParams = {\n      lat: latSearch,\n      lon: lonSearch,\n      dist: d\n    }\n\n    locationService.search(searchParams)\n      .then((results) => {\n        this.setState({ searchParams, results });\n      })\n  }\n\n  changeView = (viewport) => {\n    this.setState({ viewport });\n  }\n\n  locateUser = () => {\n    navigator.geolocation.getCurrentPosition(position => {\n\n      const currentPosition = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude\n      }\n      const savePosition = {\n        lon: position.coords.longitude,\n        lat: position.coords.latitude\n      }\n      const newViewport = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        zoom: this.state.viewport.zoom,\n        bearing: this.state.viewport.bearing,\n        pitch: this.state.viewport.pitch,\n        width: this.state.viewport.width,\n        height: this.state.viewport.height\n      }\n      this.setState({ currentPosition, savePosition, viewport: newViewport });\n    });\n  }\n\n  handleClick = (ev) => {\n    window.scrollTo(0, 0);\n    const savePosition = {\n      lon: ev.lngLat[0],\n      lat: ev.lngLat[1]\n    }\n    this.setState({ savePosition, lat: savePosition.lat, lon: savePosition.lon });\n  };\n\n  changeDetailMarker = (pos) => {\n    this.setState({ detailPosition: pos });\n  }\n\n\n\n  render() {\n    const { viewport } = this.state;\n\n    return (\n      <div className='search-list-page'>\n\n        \n\n        <div className=\"list-map\">\n        <button className='list-current-location-button' onClick={this.locateUser}>Current location</button>\n          <ReactMapGL\n            {...viewport}\n            mapboxApiAccessToken={process.env.REACT_APP_MAP_TOKEN}\n            mapStyle='mapbox://styles/gusbe/cjw3cw74r0vw01cpiazy0w3f4'\n            onViewportChange={this.changeView}\n            onClick={this.handleClick}\n          >\n\n            {this.state.currentPosition.latitude ? (\n              <Marker\n                key='currentLocation'\n                latitude={this.state.currentPosition.latitude}\n                longitude={this.state.currentPosition.longitude}\n                offsetLeft={-10}\n                offsetTop={-10}\n              >\n                <div>\n                  <img src='/img/blue.svg' alt='savePosition' style={{ width: '20px' }} />\n                </div>\n              </Marker>\n            ) : null}\n\n            \n\n            {this.state.savePosition ? (\n              <Marker\n                key='saveLocation'\n                latitude={this.state.savePosition.lat}\n                longitude={this.state.savePosition.lon}\n                offsetLeft={-13}\n                offsetTop={-27}\n              >\n                <div>\n                  <img src='/img/pin-search.svg' alt='savePosition' style={{ width: '26px' }} />\n                </div>\n              </Marker>\n            ) : null}\n\n\n\n\n\n            {this.state.results.map((Location) => (\n              <Marker\n                key={Location._id}\n                latitude={Location.coords.coordinates[1]}\n                longitude={Location.coords.coordinates[0]}\n                offsetLeft={-10}\n                offsetTop={-10}\n              >\n                <div>\n                  <img src='/img/logo-red.svg' alt='pin' style={{ width: '16px' }} />\n                </div>\n\n              </Marker>\n            ))}\n\n            {this.state.detailPosition.lon ? (\n              <Marker\n                key='detailPosition'\n                latitude={this.state.detailPosition.lat}\n                longitude={this.state.detailPosition.lon}\n                offsetLeft={-10}\n                offsetTop={-10}\n              >\n                <div>\n                  <img src='/img/logo-orange.svg' alt='savePosition' style={{ width: '16px' }} />\n                </div>\n              </Marker>\n            ) : null}\n\n\n\n\n          </ReactMapGL>\n        </div>\n        <div className=\"result-list\">\n          <h2>{this.state.results.length} film locations</h2>\n          <ResultList results={this.state.results} changeDetailMarker={this.changeDetailMarker} />\n        </div>\n      </div>\n    );\n  }\n\n\n}\n\n\nexport default Search;","import React, { Component } from 'react'\nimport ReactMapGL, { Marker } from 'react-map-gl';\nimport { Redirect } from 'react-router-dom';\n\nimport locationService from '../lib/locationService';\n\nclass SearchMap extends Component {\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      viewport: {\n        latitude: 41.39,\n        longitude: 2.17,\n        zoom: 12,\n        bearing: 0,\n        pitch: 0,\n        width: '100vp',\n        height: '95vh',\n      },\n      currentPosition: {\n        latitude: null,\n        longitude: null\n      },\n      selectedLocation: null,\n      results: [],\n      lastSearch: null,\n      goToViewLocation: false\n    }\n  }\n\n  componentDidMount() {\n\n    const listener = e => {\n      if (e.key === 'Escape') {\n        this.setState({ selectedLocation: null });\n      }\n    };\n    window.addEventListener('keydown', listener);\n  };\n\n  componentDidUpdate() {\n    if (this.state.lastSearch + 1000 < Date.now()) {\n      this.setState({ lastSearch: Date.now() });\n      this.state.results = [];\n      this.launchSearch();\n    }\n  }\n\n  launchSearch = () => {\n\n    const searchParams = {\n      lat: this.state.viewport.latitude,\n      lon: this.state.viewport.longitude,\n      dist: 30000000\n    }\n\n\n    locationService.search(searchParams)\n      .then((results) => {\n        this.setState({ searchParams, results });\n      })\n  }\n\n  changeView = (viewport) => {\n\n    this.setState({ viewport });\n\n  }\n\n  locateUser = () => {\n    navigator.geolocation.getCurrentPosition(position => {\n\n      const currentPosition = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude\n      }\n      const newViewport = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        zoom: this.state.viewport.zoom,\n        bearing: this.state.viewport.bearing,\n        pitch: this.state.viewport.pitch,\n        width: this.state.viewport.width,\n        height: this.state.viewport.height\n      }\n      this.setState({ currentPosition, viewport: newViewport });\n    });\n  }\n\n  closeLocation = (e) => {\n    e.stopPropagation();\n    this.setState({ selectedLocation: false });\n  }\n\n  goToViewLocation = () => {\n    this.setState({ goToViewLocation: this.state.selectedLocation._id });\n  }\n\n\n\n  render() {\n    const { viewport, selectedLocation, goToViewLocation } = this.state;\n\n    if (goToViewLocation) {\n      return (<Redirect to={`/location/${goToViewLocation}`} />);\n    }\n    else {\n\n      return (\n        <div className=\"search-map-page\">\n          <button className=\"current-location-button\" onClick={this.locateUser}>Current location</button>\n\n          {selectedLocation ? (\n\n            <div className=\"location-info\" onClick={this.goToViewLocation} style={{ backgroundImage: 'url(' + selectedLocation.scenePictureUrl + ')' }}>\n              <div className=\"close-location-inf\" onClick={this.closeLocation}>\n                <img src=\"/img/close-window.png\" alt=\"close\" />\n              </div>\n              <p>{selectedLocation.placeName}</p>\n              <p className=\"title-card\">{selectedLocation.title}</p>\n            </div>\n\n          ) : null}\n\n          <div className=\"search-map\">\n            <ReactMapGL\n              {...viewport}\n              mapboxApiAccessToken={process.env.REACT_APP_MAP_TOKEN}\n              mapStyle='mapbox://styles/gusbe/cjw3cw74r0vw01cpiazy0w3f4'\n              onViewportChange={this.changeView}\n\n            >\n\n\n\n              {this.state.results.map((Location) => (\n                <Marker\n                  key={Location._id}\n                  latitude={Location.coords.coordinates[1]}\n                  longitude={Location.coords.coordinates[0]}\n                  \n                  offsetLeft={selectedLocation && selectedLocation._id === Location._id ? (-12) : (-8)}\n                  offsetTop={selectedLocation && selectedLocation._id === Location._id ? (-40) : (-27)}\n\n                >\n                  <div\n                    onClick={e => {\n                      e.preventDefault();\n                      this.setState({ selectedLocation: Location })\n                    }}\n                  >\n                    {selectedLocation && selectedLocation._id === Location._id ? (\n                      <img src='/img/logo-orange.svg' alt='pin' style={{ width: '24px' }} />\n                    ) : (\n                        <img src='/img/logo-red.svg' alt='pin' style={{ width: '16px' }} />\n                      )}\n\n\n\n\n                  </div>\n\n                </Marker>\n              ))}\n\n              {this.state.currentPosition.latitude ? (\n                <Marker\n                  key='currentLocation'\n                  latitude={this.state.currentPosition.latitude}\n                  longitude={this.state.currentPosition.longitude}\n                  offsetLeft={-10}\n                  offsetTop={-10}\n                >\n                  <div>\n                    <img src='/img/blue.svg' alt='currentPosition' style={{ width: '20px' }} />\n                  </div>\n                </Marker>\n              ) : null}\n\n\n            </ReactMapGL>\n          </div>\n        </div>\n\n      );\n    }\n  }\n}\n\nexport default SearchMap;","import React, { Component } from 'react';\nimport {Switch, Route} from 'react-router-dom';\n\n\nimport PrivateRoute from './components/PrivateRoute';\nimport AnonRoute from './components/AnonRoute';\nimport AuthProvider from './providers/AuthProvider';\nimport Navbar from './components/Navbar';\nimport Footer from './components/Footer';\nimport Signup from './pages/Signup';\nimport Login from './pages/Login';\nimport AddLocation from './pages/AddLocation';\nimport ViewLocation from './pages/ViewLocation';\nimport Search from './pages/Search';\nimport SearchMap from './pages/SearchMap';\nrequire('dotenv').config();\n\n\n\nclass App extends Component {\n  render() {\n    return (\n      <AuthProvider>\n        <div className=\"container\">\n          <Navbar />\n          <Switch>\n            <Route path=\"/\" component={SearchMap} exact />\n            <AnonRoute path=\"/signup\" component={Signup} />\n            <AnonRoute path=\"/login\" component={Login} />\n            <PrivateRoute path=\"/location/add\" component={AddLocation} exact/>\n            <Route path=\"/location/:id\" component={ViewLocation}  />\n            <Route path=\"/search/:id\" component={Search}  />\n            <Route path=\"/search\" component={Search}  />\n          </Switch>\n          <Footer />\n        </div>\n      </AuthProvider>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>\n, document.getElementById('root'));"],"sourceRoot":""}